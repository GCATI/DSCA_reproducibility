<!DOCTYPE html>
<html lang="" xml:lang="">
  <head>
    <title>Data Science for Policy Hackathon</title>
    <meta charset="utf-8" />
    <meta name="author" content="" />
    <meta name="author" content="Dr. Laurie Baker" />
    <meta name="date" content="2020-07-21" />
    <script src="libs/htmlwidgets/htmlwidgets.js"></script>
    <script src="libs/jquery/jquery.min.js"></script>
    <link href="libs/datatables-css/datatables-crosstalk.css" rel="stylesheet" />
    <script src="libs/datatables-binding/datatables.js"></script>
    <link href="libs/dt-core/css/jquery.dataTables.min.css" rel="stylesheet" />
    <link href="libs/dt-core/css/jquery.dataTables.extra.css" rel="stylesheet" />
    <script src="libs/dt-core/js/jquery.dataTables.min.js"></script>
    <link href="libs/crosstalk/css/crosstalk.css" rel="stylesheet" />
    <script src="libs/crosstalk/js/crosstalk.min.js"></script>
    <link href="libs/countdown/countdown.css" rel="stylesheet" />
    <script src="libs/countdown/countdown.js"></script>
    <link rel="stylesheet" href="xaringan-themer.css" type="text/css" />
  </head>
  <body>
    <textarea id="source">
class: center, middle, inverse, title-slide

# Data Science for Policy Hackathon
## Data Science Campus, Office for National Statistics
### 
### Dr. Laurie Baker
### 2020-07-21

---















# Sustainable Development Goals (SDGs)

* Collection of 17 interconnected global goals.


![](images/SDGs.PNG)

--

* Designed to be a "blueprint to achieve a better and more sustainable future for all".

--

* All countries are working towards achieving these goals by 2030.

---

# Objectives

*  Work with and combine administrative data to deliver SDGs.

--

*  Learn to tell a data story: from project conception to policy brief

--

&lt;img src="images/blog_report.PNG" width="700"&gt;

---

# Project lifecycle


&lt;!-- ![](images/project_lifecycle.PNG) --&gt;

&lt;img src="images/project_lifecycle.PNG" width="700"&gt;
---

# Steps

1. Developing the Data Science Question (Stakeholders, Ethics)

--

2. Preprocessing the data

--

3. Exploratory Data Analysis and Visualisation of Data

--

4. Writing your own policy brief


???


---
class: inverse, center, middle

# Are there regional differences in population health/wellbeing?

---

# Are there regional differences in population health/wellbeing?

![](images/good_health_sdg.png) 
![](images/reduced_inequalities_sdg.png)

### Stakeholder: Ministry of Health

---

# Overview of the Data

* **England prescriptions data**

    * Practice-level data for all practices in England. 
    * Drugs prescribed, Quantity.
    * BNF Code:  a set of therapeutic classifications defined by the British National Formulary (BNF).

--

*  **GP Practice Population/Postcode**
    * GP practice code and address
    * Population registered

--

*  **Prescriptions and related illnesses**
     * blood pressure, cardiovascular disease, diabeties, and depression.
  

---

## Prescription data




<div id="htmlwidget-e1289da0e9dbb47f2cd8" style="width:100%;height:auto;" class="datatables html-widget"></div>
<script type="application/json" data-for="htmlwidget-e1289da0e9dbb47f2cd8">{"x":{"filter":"none","fillContainer":true,"data":[["1","2","3","4","5","6"],["Y05783","Y05783","Y05783","Y05783","Y05783","Y05783"],["0601023AEAAAAAA","0602010V0AABWBW","0602010V0AABZBZ","0702020F0AAAKAK","090401000BBNMA0","1001010AHAAABAB"],["Linagliptin_Tab 5mg","Levothyrox Sod_Tab 25mcg","Levothyrox Sod_Tab 100mcg","Clotrimazole_Pess 500mg/Crm 2%","Nutramigen PurAmino_Pdr","Celecoxib_Cap 200mg"],[1,1,1,1,1,1],[8.32,0.12,0.07,5.73,23,0.54],[7.83,0.22,0.18,5.34,21.36,0.61],[7,2,2,1,400,10]],"container":"<table class=\"display fill-container\">\n  <thead>\n    <tr>\n      <th> <\/th>\n      <th>PRACTICE<\/th>\n      <th>BNF CODE<\/th>\n      <th>BNF NAME<\/th>\n      <th>ITEMS<\/th>\n      <th>NIC<\/th>\n      <th>ACT COST<\/th>\n      <th>QUANTITY<\/th>\n    <\/tr>\n  <\/thead>\n<\/table>","options":{"pageLength":4,"columnDefs":[{"className":"dt-right","targets":[4,5,6,7]},{"orderable":false,"targets":0}],"order":[],"autoWidth":false,"orderClasses":false,"lengthMenu":[4,10,25,50,100]}},"evals":[],"jsHooks":[]}</script>

---

## Drug Illness data


<div id="htmlwidget-16c8a4eea756884da0a2" style="width:100%;height:auto;" class="datatables html-widget"></div>
<script type="application/json" data-for="htmlwidget-16c8a4eea756884da0a2">{"x":{"filter":"none","fillContainer":false,"data":[["1","2","3","4","5","6","7","8","9","10"],["depression","depression","depression","depression","depression","depression","depression","depression","depression","depression"],["fluoxetine","citalopram","paroxetine","sertraline","dapoxetine","escitalopram","fluvoxamine","duloxetine","venlafaxine","mirtazapine"]],"container":"<table class=\"display\">\n  <thead>\n    <tr>\n      <th> <\/th>\n      <th>illness<\/th>\n      <th>medication<\/th>\n    <\/tr>\n  <\/thead>\n<\/table>","options":{"pageLength":5,"order":[],"autoWidth":false,"orderClasses":false,"columnDefs":[{"orderable":false,"targets":0}],"lengthMenu":[5,10,25,50,100]}},"evals":[],"jsHooks":[]}</script>

---

## Patients and Practice Data

<div id="htmlwidget-0f091b5aecf647e3127e" style="width:100%;height:auto;" class="datatables html-widget"></div>
<script type="application/json" data-for="htmlwidget-0f091b5aecf647e3127e">{"x":{"filter":"none","fillContainer":true,"data":[["1","2","3","4","5","6","7","8","9","10"],["A81001","A81002","A81004","A81005","A81006","A81007","A81008","A81009","A81011","A81012"],["TS18 1HU","TS18 2AW","TS1 3BE","TS14 7DJ","TS18 2AT","TS24 7PW","TS6 6TD","TS5 6HF","TS24 7PW","TS3 6AL"],["00K","00K","00M","00M","00K","00K","00M","00M","00K","00M"],["E38000075","E38000075","E38000162","E38000162","E38000075","E38000075","E38000162","E38000162","E38000075","E38000162"],["Q74","Q74","Q74","Q74","Q74","Q74","Q74","Q74","Q74","Q74"],["E39000027","E39000027","E39000027","E39000027","E39000027","E39000027","E39000027","E39000027","E39000027","E39000027"],["Y54","Y54","Y54","Y54","Y54","Y54","Y54","Y54","Y54","Y54"],["E40000001","E40000001","E40000001","E40000001","E40000001","E40000001","E40000001","E40000001","E40000001","E40000001"],[4178,19902,9344,7931,13661,9834,3973,9084,11723,4778],[2029,9825,4888,3846,6770,4815,2079,4511,5732,2499],[2149,10077,4456,4085,6891,5019,1894,4573,5991,2279],[105,514,211,178,416,279,123,292,329,192],[113,568,239,223,467,320,114,296,355,168],[114,519,236,189,382,314,119,267,292,160],[109,522,290,181,385,302,104,278,337,149],[112,589,617,183,428,328,142,294,373,164],[145,681,400,192,469,313,156,334,431,201],[143,605,342,192,438,302,154,326,366,182],[127,546,279,219,383,282,118,276,321,137],[114,517,278,244,401,278,110,272,355,145],[132,660,316,242,478,319,138,307,411,159],[117,821,290,267,506,370,160,368,439,200],[136,766,328,255,509,330,162,320,407,189],[127,637,280,294,420,278,129,260,326,146],[124,611,229,313,383,268,116,196,349,82],[99,451,189,277,280,199,87,170,240,79],[100,347,139,169,186,128,71,102,178,62],[63,258,125,115,139,112,33,94,140,45],[28,156,71,81,80,72,30,45,61,34],[21,48,23,27,15,18,11,11,19,4],[0,9,6,5,5,3,2,3,3,1],[131,517,205,170,373,238,99,267,328,132],[128,532,241,219,418,322,132,257,315,152],[103,505,236,218,379,288,113,284,292,137],[126,451,244,159,366,259,97,269,342,139],[133,605,511,165,388,300,138,302,402,177],[128,635,310,190,467,311,135,328,383,181],[121,604,255,202,467,348,127,299,368,151],[120,498,233,218,399,277,110,272,314,126],[95,493,224,238,386,278,86,256,328,126],[134,680,258,274,440,327,143,337,403,159],[163,843,261,285,516,402,147,357,437,169],[141,756,266,261,523,357,126,321,430,157],[112,645,260,313,411,283,108,263,397,138],[116,649,219,373,424,270,113,234,370,75],[123,492,206,281,346,215,72,169,294,78],[98,440,218,183,238,199,64,133,227,69],[91,358,157,157,195,160,46,121,201,58],[61,245,104,103,104,106,27,66,112,36],[14,106,37,53,39,61,9,23,41,16],[11,23,11,23,12,18,2,15,7,3]],"container":"<table class=\"display fill-container\">\n  <thead>\n    <tr>\n      <th> <\/th>\n      <th>GP_PRACTICE_CODE<\/th>\n      <th>POSTCODE<\/th>\n      <th>CCG_CODE<\/th>\n      <th>ONS_CCG_CODE<\/th>\n      <th>NHSE_REGION_CODE<\/th>\n      <th>ONS_REGION_CODE<\/th>\n      <th>NHSE_COMM_REGION_CODE<\/th>\n      <th>ONS_COMM_REGION_CODE<\/th>\n      <th>TOTAL_ALL<\/th>\n      <th>TOTAL_MALE<\/th>\n      <th>TOTAL_FEMALE<\/th>\n      <th>MALE_0-4<\/th>\n      <th>MALE_5-9<\/th>\n      <th>MALE_10-14<\/th>\n      <th>MALE_15-19<\/th>\n      <th>MALE_20-24<\/th>\n      <th>MALE_25-29<\/th>\n      <th>MALE_30-34<\/th>\n      <th>MALE_35-39<\/th>\n      <th>MALE_40-44<\/th>\n      <th>MALE_45-49<\/th>\n      <th>MALE_50-54<\/th>\n      <th>MALE_55-59<\/th>\n      <th>MALE_60-64<\/th>\n      <th>MALE_65-69<\/th>\n      <th>MALE_70-74<\/th>\n      <th>MALE_75-79<\/th>\n      <th>MALE_80-84<\/th>\n      <th>MALE_85-89<\/th>\n      <th>MALE_90-94<\/th>\n      <th>MALE_95+<\/th>\n      <th>FEMALE_0-4<\/th>\n      <th>FEMALE_5-9<\/th>\n      <th>FEMALE_10-14<\/th>\n      <th>FEMALE_15-19<\/th>\n      <th>FEMALE_20-24<\/th>\n      <th>FEMALE_25-29<\/th>\n      <th>FEMALE_30-34<\/th>\n      <th>FEMALE_35-39<\/th>\n      <th>FEMALE_40-44<\/th>\n      <th>FEMALE_45-49<\/th>\n      <th>FEMALE_50-54<\/th>\n      <th>FEMALE_55-59<\/th>\n      <th>FEMALE_60-64<\/th>\n      <th>FEMALE_65-69<\/th>\n      <th>FEMALE_70-74<\/th>\n      <th>FEMALE_75-79<\/th>\n      <th>FEMALE_80-84<\/th>\n      <th>FEMALE_85-89<\/th>\n      <th>FEMALE_90-94<\/th>\n      <th>FEMALE_95+<\/th>\n    <\/tr>\n  <\/thead>\n<\/table>","options":{"pageLength":5,"columnDefs":[{"className":"dt-right","targets":[9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51]},{"orderable":false,"targets":0}],"order":[],"autoWidth":false,"orderClasses":false,"lengthMenu":[5,10,25,50,100]}},"evals":[],"jsHooks":[]}</script>

---

## Linked Data Sets: Multiple Deprivation Indices
  
  * Offical measure of relative deprivation for small areas in England. 

--

  * Ranks every small area in England from 1 (most deprived) to 32,844 (least deprived).
  
--

  * Combines seven domains:

--
      * **Income Deprivation** (22.5%)
      * **Employment Deprivation** (22.5%) 
      * **Education, Skills and Training Deprivation** (13.5%)
      * **Health Deprivation and Disability** (13.5%)
      * **Crime** (9.3%)
      * **Barriers to Housing and Services** (9.3%)
      * **Living Environment Deprivation** (9.3%)
---

## Linked Datasets: Rural Urban Classification
  * Rural-urban classification (RUC) classifies all lower layer super output areas (LSOA).

![Figure from the guide to applying the [rural urban classification](https://data.gov.uk/dataset/b1165cea-2655-4cf7-bf22-dfbd3cdeb242/rural-urban-classification-2011-of-lower-layer-super-output-areas-in-england-and-wales) to data](images/urban_rural_classification.png)
--

  * UK postcodes (spatial file)

---

# 1. Developing the Data Science Question


  1. Identify the needs of stakeholders

--

  2. Develop a project plan to meet stakeholders needs

--

  3. Identify the ethical implications of the project

![](images/1_framing_the_problem.png)


<div class="countdown" id="timer_5f16a1dc" style="right:0;bottom:0;" data-warnwhen="0">
<code class="countdown-time"><span class="countdown-digits minutes">20</span><span class="countdown-digits colon">:</span><span class="countdown-digits seconds">00</span></code>
</div> 
 
---

# 2. Preprocessing the data

- What preprocessing needs to be done?

--

- What columns link the data sets together?

--

- How will you summarise (group) the data?

--

- Where is the spatial information?

<div class="countdown" id="timer_5f16a061" style="right:0;bottom:0;" data-warnwhen="0">
<code class="countdown-time"><span class="countdown-digits minutes">15</span><span class="countdown-digits colon">:</span><span class="countdown-digits seconds">00</span></code>
</div> 
 
---

# 2. Preprocessing the data

Some of the things I did:

  * Renamed variables

--
  
  * Selected only columns of interest
  
--
  
  * Used text analysis to look for medicine matches.
  
--
  
  * Combined data sets using joins (practice code, illness match).
  
--
  
  * Grouped the data by postcode. 
  
--
  
  * Calculated the total population by postcode (practices in postcode).
  
--
  
  * Calculated prescription prevalence (# prescriptions/total population)
  
---


## Preprocessing: text analysis

We wish to match the prescriptions (`BNF NAME`) to the medications and illness data set. 

**Preview of the BNF NAME values**


```r
prescriptions %&gt;%
  select(`BNF NAME`) %&gt;%
  head(3)
```

```
## # A tibble: 3 x 1
##   `BNF NAME`                             
##   &lt;chr&gt;                                  
## 1 Sod Algin/Pot Bicarb_Susp S/F          
## 2 Sod Alginate/Pot Bicarb_Tab Chble 500mg
## 3 Gaviscon_Liq Orig Aniseed Relief
```

---

## Preview of our medication illness data


```r
drug_illness_data %&gt;%
  select(medication) %&gt;%
  head(3)
```

```
## # A tibble: 3 x 1
##   medication
##   &lt;chr&gt;     
## 1 fluoxetine
## 2 citalopram
## 3 paroxetine
```

???

We need to search through the strings (character vectors) i.e. (Sod Alginate/Pot Bicarb_Tab Chble 500mg) to look for matches to "fluoxetine" and the other medicines. 

---

## Preprocessing: Using text analysis to look for medicine matches


**Defining the search**

- `str_c`: Joins multiple strings into a single string. 
    - Combines medicines into a single string to check against `BNFName`.

--

**Detecting the match**

- `str_detect`: detects the presence or absence of a pattern in a string. 

--

**Subsetted the data based on the match**

- `str_subset`: keeps strings matching a pattern or finds positions. It is a wrapper around `str_detect`.

--

**Extracted the match**

- `str_extract`: extracts matching patterns from a string. 

---

# Writing a policy report

![](images/blog_report.PNG)

Practical: [Marriage, cohabitation, and civil partnerships in England and Wales](https://www.ons.gov.uk/peoplepopulationandcommunity/birthsdeathsandmarriages/marriagecohabitationandcivilpartnerships/bulletins/civilpartnershipsinenglandandwales/2018)

---

# Practical: Breaking down a policy report


* What is the subject of the report?

--

* What definitions did they define?

--

* What are the main points and take aways?

--

* What plots did the use to illustrate the main points?

--

* Do they mention any limitations of the data/analysis?

--

* What analysis techniques did they use to explore the subject?


<div class="countdown" id="timer_5f16a14e" style="right:0;bottom:0;" data-warnwhen="0">
<code class="countdown-time"><span class="countdown-digits minutes">15</span><span class="countdown-digits colon">:</span><span class="countdown-digits seconds">00</span></code>
</div> 
 

---

# 3. Analysis and Visualisation

<div id="htmlwidget-3e42dae008454a340945" style="width:100%;height:auto;" class="datatables html-widget"></div>
<script type="application/json" data-for="htmlwidget-3e42dae008454a340945">{"x":{"filter":"none","fillContainer":true,"data":[["1","2","3"],[522443,522443,522443],[208996,208996,208996],[0.00429499266708569,0.0967944688874921,0.0917661847894406],["alzheimers","cardiovascular disease","depression"],[41,924,876],[17409,17409,17409],[14324,14324,14324],[16614,16614,16614],[16827,16827,16827],[9015,9015,9015],[12957,12957,12957],[22073,22073,22073],[17218,17218,17218],[6,6,6],[5,5,5],[6,6,6],[6,6,6],[3,3,3],[4,4,4],[7,7,7],[6,6,6],["Urban","Urban","Urban"],["Urban city and town","Urban city and town","Urban city and town"],[9546,9546,9546],[0.224806201550388,0.224806201550388,0.224806201550388],[0.230358265241986,0.230358265241986,0.230358265241986],[0.163000209511837,0.163000209511837,0.163000209511837],[0.179865912424052,0.179865912424052,0.179865912424052],[0.10779384035198,0.10779384035198,0.10779384035198],[0.094175570919757,0.094175570919757,0.094175570919757],["AL100BS","AL100BS","AL100BS"]],"container":"<table class=\"display fill-container\">\n  <thead>\n    <tr>\n      <th> <\/th>\n      <th>X<\/th>\n      <th>Y<\/th>\n      <th>pres_prev<\/th>\n      <th>illness<\/th>\n      <th>num_pres<\/th>\n      <th>Index of Multiple Deprivation Rank<\/th>\n      <th>Income Rank<\/th>\n      <th>Employment Rank<\/th>\n      <th>Education and Skills Rank<\/th>\n      <th>Crime Rank<\/th>\n      <th>Barriers to Housing and Services Rank<\/th>\n      <th>Living Environment Rank<\/th>\n      <th>IDAOPI Rank<\/th>\n      <th>Index of Multiple Deprivation Decile<\/th>\n      <th>Income Decile<\/th>\n      <th>Employment Decile<\/th>\n      <th>Education and Skills Decile<\/th>\n      <th>Crime Decile<\/th>\n      <th>Barriers to Housing and Services Decile<\/th>\n      <th>Living Environment Decile<\/th>\n      <th>IDAOPI Decile<\/th>\n      <th>Rural_urban<\/th>\n      <th>RUC11<\/th>\n      <th>Total_pop<\/th>\n      <th>Female_0_34<\/th>\n      <th>Male_0_34<\/th>\n      <th>Female_35_59<\/th>\n      <th>Male_35_59<\/th>\n      <th>Female_60_95+<\/th>\n      <th>Male_60_95+<\/th>\n      <th>Postcode<\/th>\n    <\/tr>\n  <\/thead>\n<\/table>","options":{"pageLength":4,"columnDefs":[{"className":"dt-right","targets":[1,2,3,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,24,25,26,27,28,29,30]},{"orderable":false,"targets":0}],"order":[],"autoWidth":false,"orderClasses":false,"lengthMenu":[4,10,25,50,100]}},"evals":[],"jsHooks":[]}</script>

---

# 3. Analysis and Visualisation

* What information is relevant to the stakeholder?

--

* What kind of plots can you use to capture that information?

--

* What can and can't you tell with your data?


--

* What analysis techniques can you use to answer the stakeholder's question?

--

* Frame the question in a statistical/machine learning way

--

What is the response variable/target what are the explanatory variables/features?


<div class="countdown" id="timer_5f169e6e" style="right:0;bottom:0;" data-warnwhen="0">
<code class="countdown-time"><span class="countdown-digits minutes">15</span><span class="countdown-digits colon">:</span><span class="countdown-digits seconds">00</span></code>
</div> 

---

# An Iterative Process


&lt;img src="images/project_lifecycle.PNG" width="700"&gt;

---

# 4. Writing the Policy Report

--

## 1. Headlines and Figures
  - Set the scene
  - Organise the main findings around the figures.
--

## 2. Statistician's comment
  - What analysis did you use? What assumptions does it make?
  - What does the stakeholder need to know about the limitations of data?



<div class="countdown" id="timer_5f16a121" style="right:0;bottom:0;" data-warnwhen="0">
<code class="countdown-time"><span class="countdown-digits minutes">99</span><span class="countdown-digits colon">:</span><span class="countdown-digits seconds">00</span></code>
</div> 

---

# Presentations/Recap

---

# Thanks!

![](images/lobster.jpg)

I wasn't kidding about that lobster!

---

class: center, middle

# Thanks!

Slides created via the R package [**xaringan**](https://github.com/yihui/xaringan).

The chakra comes from [remark.js](https://remarkjs.com), [**knitr**](http://yihui.name/knitr), and [R Markdown](https://rmarkdown.rstudio.com).
    </textarea>
<style data-target="print-only">@media screen {.remark-slide-container{display:block;}.remark-slide-scaler{box-shadow:none;}}</style>
<script src="https://remarkjs.com/downloads/remark-latest.min.js"></script>
<script>var slideshow = remark.create({
"highlightStyle": "github",
"highlightLines": true,
"countIncrementalSlides": false,
"ratio": "14:9"
});
if (window.HTMLWidgets) slideshow.on('afterShowSlide', function (slide) {
  window.dispatchEvent(new Event('resize'));
});
(function(d) {
  var s = d.createElement("style"), r = d.querySelector(".remark-slide-scaler");
  if (!r) return;
  s.type = "text/css"; s.innerHTML = "@page {size: " + r.style.width + " " + r.style.height +"; }";
  d.head.appendChild(s);
})(document);

(function(d) {
  var el = d.getElementsByClassName("remark-slides-area");
  if (!el) return;
  var slide, slides = slideshow.getSlides(), els = el[0].children;
  for (var i = 1; i < slides.length; i++) {
    slide = slides[i];
    if (slide.properties.continued === "true" || slide.properties.count === "false") {
      els[i - 1].className += ' has-continuation';
    }
  }
  var s = d.createElement("style");
  s.type = "text/css"; s.innerHTML = "@media print { .has-continuation { display: none; } }";
  d.head.appendChild(s);
})(document);
// delete the temporary CSS (for displaying all slides initially) when the user
// starts to view slides
(function() {
  var deleted = false;
  slideshow.on('beforeShowSlide', function(slide) {
    if (deleted) return;
    var sheets = document.styleSheets, node;
    for (var i = 0; i < sheets.length; i++) {
      node = sheets[i].ownerNode;
      if (node.dataset["target"] !== "print-only") continue;
      node.parentNode.removeChild(node);
    }
    deleted = true;
  });
})();
// adds .remark-code-has-line-highlighted class to <pre> parent elements
// of code chunks containing highlighted lines with class .remark-code-line-highlighted
(function(d) {
  const hlines = d.querySelectorAll('.remark-code-line-highlighted');
  const preParents = [];
  const findPreParent = function(line, p = 0) {
    if (p > 1) return null; // traverse up no further than grandparent
    const el = line.parentElement;
    return el.tagName === "PRE" ? el : findPreParent(el, ++p);
  };

  for (let line of hlines) {
    let pre = findPreParent(line);
    if (pre && !preParents.includes(pre)) preParents.push(pre);
  }
  preParents.forEach(p => p.classList.add("remark-code-has-line-highlighted"));
})(document);</script>

<script>
(function() {
  var links = document.getElementsByTagName('a');
  for (var i = 0; i < links.length; i++) {
    if (/^(https?:)?\/\//.test(links[i].getAttribute('href'))) {
      links[i].target = '_blank';
    }
  }
})();
</script>

<script>
slideshow._releaseMath = function(el) {
  var i, text, code, codes = el.getElementsByTagName('code');
  for (i = 0; i < codes.length;) {
    code = codes[i];
    if (code.parentNode.tagName !== 'PRE' && code.childElementCount === 0) {
      text = code.textContent;
      if (/^\\\((.|\s)+\\\)$/.test(text) || /^\\\[(.|\s)+\\\]$/.test(text) ||
          /^\$\$(.|\s)+\$\$$/.test(text) ||
          /^\\begin\{([^}]+)\}(.|\s)+\\end\{[^}]+\}$/.test(text)) {
        code.outerHTML = code.innerHTML;  // remove <code></code>
        continue;
      }
    }
    i++;
  }
};
slideshow._releaseMath(document);
</script>
<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
(function () {
  var script = document.createElement('script');
  script.type = 'text/javascript';
  script.src  = 'https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-MML-AM_CHTML';
  if (location.protocol !== 'file:' && /^https?:/.test(script.src))
    script.src  = script.src.replace(/^https?:/, '');
  document.getElementsByTagName('head')[0].appendChild(script);
})();
</script>
  </body>
</html>
